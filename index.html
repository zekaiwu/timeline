<!doctype html>
<html>

<head>
  <title>Timeline</title>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert@1.1.3/dist/sweetalert.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/sweetalert@1.1.3/dist/sweetalert.css" rel="stylesheet" type="text/css">
  <script type="text/javascript" src="//unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js"></script>
  <link href="//unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css" rel="stylesheet" type="text/css" />
  <style type="text/css">
    #visualization {
      width: 1500px;
      height: 400px;
      border: 1px solid lightgray;
    }
  </style>
</head>

<body>
  <div id="visualization"></div>
  <script src="moment.js"></script>
  <script type="text/javascript">
    // DOM element where the Timeline will be attached
    var container = document.getElementById('visualization');

    // Create a DataSet (allows two way data-binding)
    var startTime = new Date("January 1, 2020 00:00:00");
    var longStartTime = new Date("December 31, 2019 23:59:40");
    var endTime = new Date("January 1, 2020 00:10:00");
    var longEndTime = new Date("January 1, 2020 00:00:20");
    var items = new vis.DataSet([{
      id: 1,
      content: 'item 1',
      start: new Date("January 1, 2020 00:01:00"),
      end: new Date("January 1, 2020 00:02:00")
    }, ]);

    // Configuration for the Timeline
    var options = {
      min: longStartTime,
      max: endTime,
      start: startTime,
      end: endTime,
      width: '100%',
      height: '500px',
      timeAxis: {
        scale: 'second',
        step: 5
      },
      editable: true,
      itemsAlwaysDraggable: {
        item: true,
        range: true
      },
      format: {
        minorLabels: {
          millisecond: 'SSS',
          second: 's',
          minute: '',
          hour: '',
          weekday: '',
          day: '',
          week: '',
          month: '',
          year: ''
        },
        majorLabels: {
          millisecond: 'HH:mm:ss',
          second: 'mm:ss',
          minute: 'mm',
          hour: '',
          weekday: '',
          day: '',
          week: '',
          month: '',
          year: ''
        }
      },
      onAdd: function (item, callback) {
        prettyPrompt('Add item', 'Enter text content for new item:', item.content, function (value) {
          if (value) {
            item.content = value;
            callback(item); // send back adjusted new item
          }
          else {
            callback(null); // cancel item creation
          }
        });
      },

      onUpdate: function (item, callback) {
        prettyPrompt('Update item', 'Edit items text:', item.content, function (value) {
          if (value) {
            item.content = value;
            callback(item); // send back adjusted item
          }
          else {
            callback(null); // cancel updating the item
          }
        });
      },

      onRemove: function (item, callback) {
        prettyConfirm('Remove item', 'Do you really want to remove item ' + item.content + '?', function (ok) {
          if (ok) {
            callback(item); // confirm deletion
          }
          else {
            callback(null); // cancel deletion
          }
        });
      }




    };

    // Create a Timeline
    var timeline = new vis.Timeline(container, items, options);
    items.on('*', function (event, properties) {
      logEvent(event, properties);
    });

    function logEvent(event, properties) {
      var log = document.getElementById('log');
      var msg = document.createElement('div');

    }
    function prettyPrompt(title, text, inputValue, callback) {
      swal({
        title: title,
        text: text,
        type: 'input',
        showCancelButton: true,
        inputValue: inputValue
      }, callback);
    }
    function prettyConfirm(title, text, callback) {
      swal({
        title: title,
        text: text,
        type: 'warning',
        showCancelButton: true,
        confirmButtonColor: "#DD6B55"
      }, callback);
    }
  </script>
</body>

</html>
